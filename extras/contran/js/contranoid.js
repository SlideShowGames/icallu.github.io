function Utility(){var e={isDoubleTapBug:function(e){return!(!("ontouchstart"in document.documentElement)||!$.browser.android)&&(!e.originalEvent.touches&&(e.preventDefault(),e.stopPropagation(),!0))},touchEnded:function(){touchEndedSinceTap=!0},isTouch:function(){return $.browser.ios||$.browser.android||"ontouchstart"in document.documentElement},padLeft:function(e,t,a){return Array(t-String(e).length+1).join(a||"0")+e},trim:function(e){return e.replace(/^\s*|\s*$/gi,"")},between:function(e,t,a){return a?1*(Math.random()*(t-e)+e).toFixed(a):Math.floor(Math.random()*(t-e+1)+e)},shuffleSimple:function(e){return e.sort((function(){return.5-Math.random()})),e},shuffle:function(e){for(var t=0;t<e.length-1;t++){var a=t+Math.floor(Math.random()*(e.length-t)),i=e[a];e[a]=e[t],e[t]=i}return e},index:function(e,t){var a=0;for(var i in e){if(a==t)return e[i];a++}},areArraysEqual:function(e,t){return!(!e||!t)&&e.join("|")===t.join("|")},count:function(e){var t=0;for(var a in e)t++;return t},eat:function(e){return e.preventDefault(),e.stopPropagation(),!1},pick:function(e){var t=e;if(e.constructor==Object)for(var a in t=[],e)t.push(a);var i=Utils.between(0,t.length-1);return 0==t.length?null:t[i]},draw:function(e,t){var a=e;if(e.constructor==Object)for(var i in a=[],e)a.push(i);if(0==a.length)return null;var n=Utils.between(0,a.length-1);if(null!=t){for(var o=!1,s=0;s<a.length;s++)if(a[s]==t){n=s,o=!0;break}if(!o)return null}var r=a[n];return a.splice(n,1),r},removeFromArray:function(e,t){if(0==e.length)return null;for(var a=!1,i=-1,n=0;n<e.length;n++)if(e[n]==t){i=n,a=!0;break}if(!a)return null;var o=e[i];return e.splice(i,1),o},toArray:function(e){var t=[];for(var a in e)t.push(a);return t},fillArray:function(e,t,a){a||(a=1);for(var i=new Array,n=0;a>n;n++)for(var o=e;t>=o;o++)i.push(o);return i},contains:function(e,t){for(var a=0;a<e.length;a++)if(e[a]==t)return!0;return!1},setCookie:function(e,t,a){if(a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3);var n="; expires="+i.toGMTString()}else n="";document.cookie=e+"="+t+n+"; path=/"},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null},clearCookie:function(e){this.setCookie(e,"",-1)},cssVendor:function(e,t,a){switch(t){case"opacity":$.browser.ie?e.css("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+Math.round(100*a)+')"'):e.css(t,a);break;default:for(var i=["","-webkit-","-moz-","-o-","-ms-"],n=0;n<i.length;n++)e.css(i[n]+t,a)}}};for(var t in e)this[t]=e[t]}function getAndroidVersion(e){var t=(e=(e||navigator.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/);return!!t&&t[1]}function generateUUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)}))}function DOMRenderer(){function e(){for(var e in S){t(S[e])}}function t(e){var t=e.id,a=e.x;if(n=2==t?w.black2:w.white2,1==r&&(n=w.white),e.invisible){var i=2==e.id?v.black:v.white;1==r&&(i=v.white);var n="rgba("+i.r+","+i.g+","+i.b+", "+y+")"}var o=e.$el;(o||(o=$('<div data-type="paddle" class="paddle" data-paddle-id="'+t+'"></div>'),$("#gameplay").append(o),e.$el=o,o.css({"z-index":10,position:"absolute",top:0,left:0,width:e.width,height:e.height,"background-color":n})),e.locked)&&(a=(1==e.id?S[2]:S[1]).x);var s={x:Math.round(a)-e.half,y:e.y,width:e.width,height:f.height};e.drawn=s,e.$el.css({"-webkit-transform":"translate3d("+e.drawn.x+"px, "+e.drawn.y+"px, 0)",transform:"translate3d("+e.drawn.x+"px, "+e.drawn.y+"px, 0)",width:e.drawn.width,height:e.drawn.height,"background-color":n})}function a(e){var t={x:e.x+g,y:e.y+g,size:g};e.drawn=t;var a=2==e.paddleId?w.black:w.white;1==r&&(a=w.white);var i=e.$el;i||(i=$('<div data-type="ball" class="ball" data-ball-id="'+e.id+'"></div>'),$("#gameplay").append(i),e.$el=i,i.css({"z-index":8,position:"absolute",top:-e.drawn.size,left:-e.drawn.size,width:2*e.drawn.size,height:2*e.drawn.size,"background-color":a,"border-radius":2*e.drawn.size})),i.css({"-webkit-transform":"translate3d("+e.drawn.x+"px, "+e.drawn.y+"px, 0)",transform:"translate3d("+e.drawn.x+"px, "+e.drawn.y+"px, 0)"})}function i(e,t,a){var i=e.$el;if(!i){i=$('<div data-type="brick" class="brick" data-brick-id="'+e.id+'"></div>'),$("#gameplay").append(i),e.$el=i,i.css({"z-index":9,position:"absolute",top:0,left:0,width:b.fallTemplate.width,height:b.fallTemplate.height,"background-color":w.red});var n=e.type,o=w.white;e.type>3&&(o=w.black,n-=3);for(var s=b.fallTemplate.width/(n+1),r=1;n>=r;r++){var l=r*s,d=$('<div class="line"></div>');i.append(d),d.css({position:"absolute",width:1,height:t,top:a,left:l,"background-color":o})}}i.css({"-webkit-transform":"translate3d("+e.x+"px, "+e.y+"px, 0)",transform:"translate3d("+e.x+"px, "+e.y+"px, 0)"})}function n(e){e.drawn;for(var i in A){var n=A[i];if(n.paddleId==e.id&&n.sticky)n.drawn&&a(n)}t(e)}var o={},s={},r=0,l=(Math.PI,30),d=0,c={left:0,top:0,width:0,height:0,halfHeight:0},h=.04375,u=22,g=11,p=4/480,f={t:{w:.21875,h:24/104},width:0,height:0,half:0,maxSpeedFactor:.0125,maxSpeed:0},m=7/320,b={t:{w:.15625,h:.5},fallTemplate:{w:.09375,h:.6},offsetTop:0,width:64,height:32,halfWidth:0,halfHeight:0,catchThresholdForAiFactor:.2,catchThresholdForAi:0},w={white:"#ffffff",black:"#000000",red:"#555555",white2:Colors.shadeColor("#ffffff",.1),black2:Colors.shadeColor("#000000",-.1)},y=.1,v={white:Colors.hexToRgb(w.white),black:Colors.hexToRgb(w.black),red:Colors.hexToRgb(w.red)},T=null,S=null,A=null;this.init=function(e,t,a){T=e,S=t,A=a,$("#gameplay").append('<canvas id="background-canvas">'),o.bg=$("#background-canvas")[0],s.bg=o.bg.getContext("2d"),$("#background-canvas").css("background-color",w.black)},this.resize=function(){var e=$("#gameplay"),t=e.offset();for(var a in c.left=t.left,c.top=t.top,c.width=e.width(),c.height=e.height(),c.realWidth=e.width(),c.realHeight=e.height(),c.xFactor=c.realWidth/c.width,c.yFactor=c.realHeight/c.height,c.halfHeight=Math.round(c.height/2),p*c.height,f.width=Math.round(f.t.w*c.width),f.height=Math.round(f.width*f.t.h),f.half=Math.round(f.width/2),f.maxSpeed=f.maxSpeedFactor*c.width,u=Math.round(h*c.width),g=Math.round(u/2),b.width=Math.ceil(b.t.w*c.width),b.height=Math.ceil(b.width*b.t.h),b.halfWidth=Math.ceil(b.width/2),b.halfHeight=Math.ceil(b.height/2),b.fallTemplate.width=b.fallTemplate.w*c.width,b.fallTemplate.height=b.fallTemplate.h*b.fallTemplate.width,b.fallTemplate.halfWidth=Math.round(b.fallTemplate.width/2),b.fallTemplate.halfHeight=Math.round(b.fallTemplate.height/2),b.catchThresholdForAi=c.height*b.catchThresholdForAiFactor,c.width*m,o){var i=o[a];i.width=c.width,i.height=c.height}},this.start=function(e,t,a,i,n){r=n||0,l=i,T=e,S=t,A=a,$("#gameplay div[data-type]").remove()},this.draw=function(t,o,s,r){!function(e,t,a,i){e||(n(i),t||n(a))}(t,o,s,r);var c=(new Date).getTime();d&&d.getTime()+l>c||(function(){for(var e in A)a(A[e])}(),function(){var e=b.fallTemplate.height/2;for(var t in lineOffset=e/2,T){i(T[t],e,lineOffset)}}(),e(),d=new Date)},this.removeBall=function(e){$('#gameplay [data-ball-id="'+e.id+'"]').remove()},this.loseBrick=function(e){$('#gameplay [data-brick-id="'+e.id+'"]').remove()},this.prepareLevel=function(e){b.width=Math.ceil(c.width/e),b.height=Math.ceil(b.width*b.t.h),b.halfWidth=Math.ceil(b.width/2),b.halfHeight=Math.ceil(b.height/2)},this.drawBackgroundBrick=function(e,t,a){1!=r&&(1==e?(s.bg.beginPath(),s.bg.rect(t,a,b.width,b.height),s.bg.closePath(),s.bg.fillStyle=w.white,s.bg.fill()):2==e&&s.bg.clearRect(t,a,b.width,b.height))}}window.isWebApp=!0;var app={fontsLoaded:!1,deviceReady:!1,started:!1,initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){app.deviceReady=!0,app.start()},receivedEvent:function(e){},start:function(){return!app.started&&(app.started=!0,void Game.init())}};app.initialize();var Utils=new Utility,Colors=new function(){function e(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function a(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function n(e,t,i){return"object"==typeof e&&(t=e.g,i=e.b,e=e.r),"#"+a(e)+a(t)+a(i)}function o(e){return hsv=new Object,max=function(e,t,a){return e>t?e>a?e:a:t>a?t:a}(e.r,e.g,e.b),dif=max-function(e,t,a){return t>e?a>e?e:a:a>t?t:a}(e.r,e.g,e.b),hsv.saturation=0==max?0:100*dif/max,0==hsv.saturation?hsv.hue=0:e.r==max?hsv.hue=60*(e.g-e.b)/dif:e.g==max?hsv.hue=120+60*(e.b-e.r)/dif:e.b==max&&(hsv.hue=240+60*(e.r-e.g)/dif),hsv.hue<0&&(hsv.hue+=360),hsv.value=Math.round(100*max/255),hsv.hue=Math.round(hsv.hue),hsv.saturation=Math.round(hsv.saturation),hsv}function s(e){var a=new Object;if(0==e.saturation)a.r=a.g=a.b=Math.round(2.55*e.value);else{switch(e.hue/=60,e.saturation/=100,e.value/=100,i=Math.floor(e.hue),f=e.hue-i,p=e.value*(1-e.saturation),q=e.value*(1-e.saturation*f),t=e.value*(1-e.saturation*(1-f)),i){case 0:a.r=e.value,a.g=t,a.b=p;break;case 1:a.r=q,a.g=e.value,a.b=p;break;case 2:a.r=p,a.g=e.value,a.b=t;break;case 3:a.r=p,a.g=q,a.b=e.value;break;case 4:a.r=t,a.g=p,a.b=e.value;break;default:a.r=e.value,a.g=p,a.b=q}a.r=Math.round(255*a.r),a.g=Math.round(255*a.g),a.b=Math.round(255*a.b)}return a}this.hexToRgb=e,this.componentToHex=a,this.rgbToHex=n,this.colorToRgb=function(t){return isNaN(t)||(t=PALETTE[t]),e(t)},this.colorsMatch=function(e,t){return e.r==t.r&&(e.g==t.g&&e.b==t.b)},this.getComplementary=function(t){var a=!1;"string"==typeof t&&(a=!0),a&&(t=e(t));var i=o(t);i.hue=function(e,t){for(e+=t;e>=360;)e-=360;for(;0>e;)e+=360;return e}(i.hue,180);var r=s(i);return a&&(r=n(r)),r},this.rgbToHsv=o,this.hsvToRgb=s,this.luminateHex=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var a,i,n="#";for(i=0;3>i;i++)a=parseInt(e.substr(2*i,2),16),n+=("00"+(a=Math.round(Math.min(Math.max(0,a+a*t),255)).toString(16))).substr(a.length);return n},this.shadeColor=function(e,t){var a=parseInt(e.slice(1),16),i=0>t?0:255,n=0>t?-1*t:t,o=a>>16,s=a>>8&255,r=255&a;return"#"+(16777216+65536*(Math.round((i-o)*n)+o)+256*(Math.round((i-s)*n)+s)+(Math.round((i-r)*n)+r)).toString(16).slice(1)}};if(window.$=window.$||{},$.browser={},$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase()),$.browser.android=/android/.test(navigator.userAgent.toLowerCase()),$.browser.safari=/safari/.test(navigator.userAgent.toLowerCase()),$.browser.ipad=/ipad/.test(navigator.userAgent.toLowerCase()),$.browser.iphone=/iphone|ipod/.test(navigator.userAgent.toLowerCase()),$.browser.ios=/ipad|iphone|ipod/.test(navigator.userAgent.toLowerCase()),$.browser.ie=/msie/.test(navigator.userAgent.toLowerCase()),$.browser.chromeWebStore=!(!window.chrome||!window.chrome.storage),$.browser.desktop=!$.browser.android&&!$.browser.ios,$.browser.mobile=!$.browser.desktop,$.browser.android){var v=getAndroidVersion();parseFloat(v)<=4.3&&$("html").addClass("crappy-android")}for(var o in $.browser)$.browser[o]&&$("html").addClass(o);window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout((function(){e(+new Date)}),10)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(){};for(var KEYS={ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:48,Escape:27,Enter:13,Space:32},i=65;122>=i;i++)KEYS[String.fromCharCode(i)]=i;var Language=new function(){function e(e){a[e]&&(o=a[n=e],function(){for(var e in o.strings){var t=o.strings[e],a=$('[data-lang="'+e+'"]');a.length&&a.html(t)}}(),Game.updateStrings(),Storage.setDataValue("lang",e),setTimeout(Game.resize,0))}var t=this,a={},i="en",n="en",o=null;this.init=function(){window.lang=function(e,a){return t.get(e,a)},function(){var t=Storage.getDataValue("lang",void 0);t&&a[t]?e(t):e(i)}()},this.register=function(e){a[e.id]=e},this.set=e,this.get=function(e,t){return o&&o.strings[e]?o.strings[e]:t},this.next=function(){var t=[],i=0,o=0;for(var s in a)t.push(s),s==n&&(i=o),o++;var r=t[(i+1)%t.length];return e(r),r},this.__defineGetter__("languages",(function(){return a})),this.__defineGetter__("size",(function(){return o&&o.size?o.size:1}))};Language.register({id:"en",name:"English",strings:{presents:"Proudly Premieres...",directedBy:"<h3>A performance<br>directed by</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"ONE actor!",twoPlayer:"TWO actors!",spectate:"Spectate!",settings:"Settings!",stageTitle:"PERFORMANCE",stage1:"<b>1.</b> Insanely short!",stage2:"<b>2.</b> Short!",stage3:"<b>3.</b> Regular!",stage4:"<b>4.</b> Loooong!",stage5:"<b>5.</b> All Nighter!",pongMode:"... or PONG!",youHaveGift:"YOU HAVE A GIFT!",unlockedPONG:"We've added PONG to the menu!",pause:"pause",back:"back",exit:"exit",copyright:"&copy; 1897",youLose:"<h1>0h n0!</h1>",youWin:"<h1>A WINNER<br>IS YOU!</h1>",getReady:"GET READY!",bestTime:"Best time",yourTime:"Your time",replay:"Replay!",resume:"Resume!",theEnd:"THE END",playerOne:"Actor One",playerTwo:"Actor Two",useWSAD:"Use W + S + A + D !",settingsTitle:"BACKSTAGE",musicEnabled:"The pianist plays<br>the Blue Goose Rag!",musicDisabled:"The pianist left!<br>&nbsp;",effectsEnabled:"The projector is shaking!",effectsDisabled:"The projector is steady!",toggleGoogleplayEnabled:"Sign out of Google Play.",toggleGoogleplayDisabled:"Sign in to Google Play.",toggleGamecenterEnabled:"Signed in to Game Center.",toggleGamecenterDisabled:"Sign in to Game Center.",fpsEnabled:"Authentic 12 FPS<br>is ON!",fpsDisabled:"Authentic 12 FPS<br>is OFF!",language:"The language is English!",paused:"BREAK!",pausedMessage:"Soft drinks available in the cantina!",pausedTrialMessage:"Soft drinks and in-app purchases available in the cantina!",buyFullVersion:"YES! SHUT UP <br>AND TAKE MY MONEY!",noThanks:"No thanks",buyMsg1:"buy the",buyMsg2:"FULL VERSION",buyMsg3:"and enjoy",buyMsg4:"ALL PERFORMANCES!",buyMsg5:"NO SALES PITCHES!",giveMeAllStages:"GIVE ME ALL PERFORMANCES!",restorePurchase:"Restore my purchase!",couldNotRestorePurchase:"Could not restore a purchase.",lockedMsg1:"DRATS!",lockedMsg2:"IT'S LOCKED!",lockedMsg3:"By that Scrooge of a dev!",lockedMsg4:"TIP! You can spectate all performances!",thanks:"THANKS!",enjoyAwesome:"ENJOY THE AWESOME!",error:"Something went wrong!",creditsPerformanceBy:"A performance by",creditsDirectedBy:"Directed by",creditsThanks:"Thanks!",getTheApp:"Get the app!"}}),Language.register({id:"es",name:"Espanõl",strings:{presents:"Se Complace En Presentar...",directedBy:"<h3>Un espectáculo<br>dirigido por</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"¡UN artista!",twoPlayer:"¡DOS artistas!",spectate:"¡A Ver!",settings:"¡Tras Bastidores!",stageTitle:"ESPECTÁCULO",stage1:"<b>1.</b> ¡Cortísima!",stage2:"<b>2.</b> ¡Corta!",stage3:"<b>3.</b> ¡Regular!",stage4:"<b>4.</b> ¡Larga!",stage5:"<b>5.</b> ¡Larguísima!",pongMode:"... o PONG!",youHaveGift:"¡UN REGALO PARA TI!",unlockedPONG:"¡Hemos añadido PONG al menú!",pause:"pausar",back:"volver",exit:"salida",copyright:"&copy; 1897",youLose:"<h1>0h n0!</h1>",youWin:"<h1>¡EL GANADOR<br>ERES TÚ!</h1>",getReady:"¡PREPÁRATE!",bestTime:"Máxima duración",yourTime:"Última duración",replay:"¡Otra más!",resume:"¡Regresar!",theEnd:"EL FIN",playerOne:"Artista Uno",playerTwo:"Artista Dos",useWSAD:"Usar las teclas W + S + A + D !",settingsTitle:"TRAS<br>BASTIDORES",musicEnabled:"¡El pianista interpreta<br>the Blue Goose Rag!",musicDisabled:'¡El pianista se ha ido!"<br>&nbsp;',effectsEnabled:"¡La película tiembla!",effectsDisabled:"¡La película está estable!",toggleGoogleplayEnabled:"Cerrar la sesión de Google Play.",toggleGoogleplayDisabled:"Iniciar sesión en Google Play.",toggleGamecenterEnabled:"Cerrar la sesión de Game Center.",toggleGamecenterDisabled:"Iniciar sesión en Game Center.",fpsEnabled:"¡12 FPS auténtico<br>ACTIVADO!",fpsDisabled:"¡12 FPS auténtico<br>DESACTIVADO!",language:"¡El idioma es español!",paused:"¡INTERMEDIO!",pausedMessage:"¡Hay refrescos disponibles en la cantina!",pausedTrialMessage:"¡Hay refrescos y compras in-app disponibles en la cantina!",buyFullVersion:"¡SÍ! ¡CALLA Y <br>TOMA MI DINERO!",noThanks:"No gracias",buyMsg1:"compra la",buyMsg2:"VERSIÓN COMPLETA",buyMsg3:"y disfrute",buyMsg4:"¡TODOS LOS ESPECTÁCULOS!",buyMsg5:"¡SIN MÁS PROMOCIONES!",giveMeAllStages:"¡DAME TODOS LOS ESPECTÁCULOS!",restorePurchase:"¡Quiero reestablecer mi compra!",couldNotRestorePurchase:"No se pudo reestablecer la compra.",lockedMsg1:"¡RAYOS!",lockedMsg2:"¡ESTÁ CERRADO CON LLAVE!",lockedMsg3:"¡Por ese tacaño desarrollador!",lockedMsg4:"CONSEJO: ¡Puedes ver todos los espectáculos!",thanks:"¡GRACIAS!",enjoyAwesome:"¡QUE DISFRUTES!",error:"¡Algo salió mal!",creditsPerformanceBy:"Un espectáculo de",creditsDirectedBy:"Dirigido por",creditsThanks:"¡Gracias!",getTheApp:"¡Descargar la app!"}}),Language.register({id:"fr",name:"Francais",strings:{presents:"En avant première...",directedBy:"<h3>Un spectacle<br>dirigé par</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"UN acteur!",twoPlayer:"DEUX acteurs!",spectate:"Regardez!",settings:"Coulisse!",stageTitle:"SPECTACLE",stage1:"<b>1.</b> Trop court!",stage2:"<b>2.</b> Court!",stage3:"<b>3.</b> Normal!",stage4:"<b>4.</b> Loooong!",stage5:"<b>5.</b> Toute la nuit!",pongMode:"... de PONG!",youHaveGift:"UN CADEAU POUR VOUS!",unlockedPONG:"Nous avons ajouté PONG dans le menu!",pause:"pause",back:"retour",exit:"exit",copyright:"&copy; 1897",youLose:"<h1>0h n0n!</h1>",youWin:"<h1>VOUS ÊTES<br>LE GAGNANT!</h1>",getReady:"SOYEZ PRET!",bestTime:"Meilleur temps",yourTime:"Votre temps",replay:"Recommencer!",resume:"Reprendre!",theEnd:"FIN",playerOne:"Acteur Un",playerTwo:"Acteur Deux",useWSAD:"Utilise Z + Q + S + D !",settingsTitle:"COULISSE",musicEnabled:"Le pianiste joue<br>Blue Goose Rag!",musicDisabled:"Le pianiste est parti!<br>&nbsp;",effectsEnabled:"Le projecteur est allumé!",effectsDisabled:"Le projecteur est eteint!",toggleGoogleplayEnabled:"Se deconnecter de Google Play.",toggleGoogleplayDisabled:"Se connecter à Google Play.",toggleGamecenterEnabled:"Se deconnecter du Game Center.",toggleGamecenterDisabled:"Se connecter au Game Center.",fpsEnabled:"L'Authentique 12 FPS<br>est ON!",fpsDisabled:"L'Authentique 12 FPS<br>est OFF!",language:"Le langage est en français!",paused:"ENTRACTE!",pausedMessage:"Des boissons fraiches sont disponible à la cantine!",pausedTrialMessage:"Les boissons fraiches et les achats in-app sont disponible à la cantine!",buyFullVersion:"OUI! SHUT UP <br>AND TAKE MY MONEY!",noThanks:"Non merci",buyMsg1:"achetez-la",buyMsg2:"VERSION COMPLETE",buyMsg3:"et appréciez",buyMsg4:"TOUT LES SPECTACLES!",buyMsg5:"SANS PUB!",giveMeAllStages:"DONNEZ-MOI TOUT LES SPECTACLES!",restorePurchase:"Restaurer un achat!",couldNotRestorePurchase:"Impossible de restaurer un achat.",lockedMsg1:"FLUTE!",lockedMsg2:"C'EST VEROUILLE",lockedMsg3:"Ce grippe-sou de developpeur!",lockedMsg4:"PSH! You pourrez regarder tout les spectacles!",thanks:"MERCI!",enjoyAwesome:"QUE LE SPECTACLE COMMENCE!",error:"Disfonctionnement détecté!",creditsPerformanceBy:"Un spectable de",creditsDirectedBy:"Dirigé par",creditsThanks:"Merci!",getTheApp:"Télécharger l'application!"}}),Language.register({id:"de",name:"Deutsch",strings:{presents:"Presentiert...",directedBy:"<h3>Eine Aufführung<br>inszeniert durch</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"EIN Schauspieler!",twoPlayer:"ZWEI Schauspieler!",spectate:"Vorschau!",settings:"Hinter den Kulissen!",stageTitle:"PERFORMANCE",stage1:"<b>1.</b> Ultra kurz!",stage2:"<b>2.</b> Kurz!",stage3:"<b>3.</b> Normal!",stage4:"<b>4.</b> Lang!",stage5:"<b>5.</b> Noch länger!",pongMode:"... oder PONG!",youHaveGift:"EIN GESCHENK FÜR DICH!",unlockedPONG:"Wir haben PONG dem Menü hinzugefügt!",pause:"Pause",back:"Zurück",exit:"Ausgang",copyright:"&copy; 1897",youLose:"<h1>Du hast verloren!</h1>",youWin:"<h1>Du hast gewonnen!</h1>",getReady:"MACH DICH BEREIT!",bestTime:"Beste Zeit",yourTime:"Deine Zeit",replay:"Nochmal!",resume:"Weiter!",theEnd:"ENDE",playerOne:"Schauspieler Eins",playerTwo:"Schauspieler Zwei",useWSAD:"Benutze W + S + A + D !",settingsTitle:"Hinter den Kulissen",musicEnabled:"Der Pianist spielt<br>Blue Goose Rag!",musicDisabled:"Der Pianist ist verschwunden!<br>&nbsp;",effectsEnabled:"Der Projector wackelt!",effectsDisabled:"Der Projector ist stabil!",toggleGoogleplayEnabled:"Abmelden von Google Play.",toggleGoogleplayDisabled:"Anmelden bei Google Play.",toggleGamecenterEnabled:"Abmelden von Game Center.",toggleGamecenterDisabled:"Anmelden bei Game Center.",fpsEnabled:"Authentisch 12 FPS ist AN!",fpsDisabled:"Authentisch 12 FPS is AUS!",language:"Die Sprache ist Deutsch!",paused:"PAUSE!",pausedMessage:"Kaffee und Tee sind an der Bar zu erhalten!",pausedTrialMessage:"Kaffee, Tee und In-App-Kauf sind an der Bar zu erhalten!",buyFullVersion:"JA! HIER HASTE MEIN GELD!",noThanks:"Nein Danke",buyMsg1:"Kauf die",buyMsg2:"KOMPLETTE VERSION",buyMsg3:"und hab Spass",buyMsg4:"ALLE AUFTRITTE!",buyMsg5:"Kein Gelaber!",giveMeAllStages:"ZEIGE MIR ALLE AUFTRITTE!",restorePurchase:"Ich habe schon bezahlt!",couldNotRestorePurchase:"Keinen Ankauf gefunden.",lockedMsg1:"MIST!",lockedMsg2:"VERSCHLOSSEN!",lockedMsg3:"Durch den geizhalzigen Spielemacher!",lockedMsg4:"TIP! Sie könnenn bei allen Auftritten zuschauen!",thanks:"DANKE IHNEN!",enjoyAwesome:"Viel Vergnügen!",error:"Es ist was schief gelaufen!",creditsPerformanceBy:"Ein Auftritt von",creditsDirectedBy:"Inszeniert duch",creditsThanks:"Vielen Dank!"}}),Language.register({id:"it",name:"Italiano",strings:{presents:"Presenta Orgogliosamente",directedBy:"<h3>Una performance<br>diretta da</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"UN attore!",twoPlayer:"DUE attori!",spectate:"Spettatore",settings:"Backstage!",stageTitle:"DURATA<br>PERFORMANCE",stage1:"<b>1.</b> Brevissimo!",stage2:"<b>2.</b> Breve!",stage3:"<b>3.</b> Normale!",stage4:"<b>4.</b> Lunga!",stage5:"<b>5.</b> Nottambulo!",pongMode:"... o PONG!",youHaveGift:"C'&Egrave; UN REGALO PER TE!",unlockedPONG:"Abbiamo aggiunto PONG al tuo menu!",pause:"pausa",back:"indietro",exit:"esci",copyright:"&copy; 1897",youLose:"<h1>0h n0!</h1>",youWin:"<h1>Il vincitore<br>&egrave; lei!</h1>",getReady:"ATTORI IN SCENA!",bestTime:"Miglior tempo",yourTime:"Il tuo tempo",replay:"Replay!",resume:"Riprendi!",theEnd:"FINE",playerOne:"Primo Attore",playerTwo:"Secondo Attore",useWSAD:"Usa W + S + A + D !",settingsTitle:"BACKSTAGE",musicEnabled:"Il pianista sta suonando<br>the Blue Goose Rag!",musicDisabled:"Il pianista &egrave; fuggito!<br>&nbsp;",effectsEnabled:"Il proiettore &egrave; instabile!",effectsDisabled:"Il proiettore &egrave; stabile!",toggleGoogleplayEnabled:"Logout da Google Play.",toggleGoogleplayDisabled:"Login su Google Play.",toggleGamecenterEnabled:"Logout dal Game Center.",toggleGamecenterDisabled:"Login nel Game Center.",fpsEnabled:"L'autentico framerate a 12 FPS<br>&egrave; ACCESO!",fpsDisabled:"L'autentico framerate a 12 FPS<br>&egrave; SPENTO!",language:"La lingua &egrave; Italiano!",paused:"INTERVALLO!",pausedMessage:"Soft drinks disponibili nella nostra cantina!",pausedTrialMessage:"Soft drinks e acquisti in-app disponibili nella nostra cantina!",buyFullVersion:"LO VOGLIO! ZITTO<br>E PRENDI I MIEI SOLDI!",noThanks:"No grazie",buyMsg1:"compra la",buyMsg2:"VERSIONE COMPLETA",buyMsg3:"e goditi",buyMsg4:"TUTTE LE PERFORMANCE!",buyMsg5:"NIENTE SCHERZI",giveMeAllStages:"OTTIENI TUTTE LE PERFORMANCE!",restorePurchase:"Ripristina i miei acquisti!",couldNotRestorePurchase:"Impossibile ripristinare gli acquisti!",lockedMsg1:"DIAMINE!",lockedMsg2:"&Egrave; BLOCCATO!",lockedMsg3:"Da quell'antipatico dello sviluppatore!",lockedMsg4:"SUGGERIMENTO! Puoi comunque assistere a tutte le performance!",thanks:"GRAZIE!",enjoyAwesome:"GODITI L'INCREDIBILE!",error:"Qualcosa &egrave; andato storto!",creditsPerformanceBy:"Una performance di",creditsDirectedBy:"Diretta da",creditsThanks:"Grazie!",getTheApp:"Scarica l'app!"}}),Language.register({id:"nl",name:"Nederlands",strings:{presents:"Presenteert...",directedBy:"<h3>Een optreden<br>geregisseerd door</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"ÉÉN acteur!",twoPlayer:"TWEE acteurs!",spectate:"Toekijken!",settings:"Instellingen!",stageTitle:"VOORSTELLING",stage1:"<b>1.</b> Heel kort!",stage2:"<b>2.</b> Kort!",stage3:"<b>3.</b> Normaal!",stage4:"<b>4.</b> Lang!",stage5:"<b>5.</b> Té lang!",pongMode:"... of PONG!",youHaveGift:"CADEAUTJE!",unlockedPONG:"We hebben PONG aan je menu toegevoegd!",pause:"pauze",back:"terug",exit:"sluit",copyright:"&copy; 1897",youLose:"<h1>JE HEBT VERLOREN!</h1>",youWin:"<h1>JE HEBT GEWONNEN!</h1>",getReady:"KLAAR?",bestTime:"Beste tijd",yourTime:"Jouw tijd",replay:"Nog een keer!",resume:"Hervat het spel!",theEnd:"EINDE",playerOne:"Acteur Één",playerTwo:"Acteur Twee",useWSAD:"Gebruik W + S + A + D !",settingsTitle:"INSTELLINGEN",musicEnabled:"De pianospeler speelt<br>de Blue Goose Rag!</div>",musicDisabled:"De pianospeler heeft<br>het gebouw verlaten!",effectsEnabled:"De projector schokt!",effectsDisabled:"De projector is stabiel!",toggleGoogleplayEnabled:"Log uit bij Google Play.",toggleGoogleplayDisabled:"Log in bij Google Play.",toggleGamecenterEnabled:"Ingelogd bij Game Center.",toggleGamecenterDisabled:"Log in bij Game Center.",fpsEnabled:"Authentieke 12 FPS<br>staat AAN!",fpsDisabled:"Authentieke 12 FPS<br>staat UIT!",language:"De taal is Nederlands!",paused:"PAUZE!",pausedMessage:"Haal je Jolt-Cola en Ranja aan de bar!",pausedTrialMessage:"Haal je Jolt-Cola, Ranja en in-app-aankopen aan de bar!",buyFullVersion:"JA! NEEM MIJN GELD!",noThanks:"Nee dank je",buyMsg1:"koop de",buyMsg2:"VOLLEDIGE VERSIE",buyMsg3:"en geniet van",buyMsg4:"ALLE VOORSTELLINGEN!",buyMsg5:"GEEN PRAATJES!",giveMeAllStages:"GEEF ME ALLE VOORSTELLINGEN!",restorePurchase:"Ik heb al betaald!",couldNotRestorePurchase:"Kon geen aankopen herstellen.",lockedMsg1:"DROMMELSCH!",lockedMsg2:"DIE ZIT OP SLOT!",lockedMsg3:"Door die gierige maker!",lockedMsg4:"TIP! Je kunt bij alle voorstellingen toekijken!",thanks:"BEDANKT!",enjoyAwesome:"GENIET ERVAN!",error:"Er ging iets mis!",creditsPerformanceBy:"Een voorstelling van",creditsDirectedBy:"Geregisseerd door",creditsThanks:"Bedankt!",getTheApp:"Download de app!"}}),Language.register({id:"dk",name:"Dansk",strings:{presents:"Præsenterer stolt...",directedBy:"<h3>En performance<br>dirigeret af</h3><h1>Martin Kool</h1>",title:"CONTRANOID",onePlayer:"EN aktør!",twoPlayer:"TO aktører!",spectate:"Publikum!",settings:"Backstage!",stageTitle:"PERFORMANCE",stage1:"<b>1.</b> Ufattelig kort!",stage2:"<b>2.</b> Kort!",stage3:"<b>3.</b> Almindelig!",stage4:"<b>4.</b> Laaang!",stage5:"<b>5.</b> All Nighter!",pongMode:"... eller PONG!",youHaveGift:"Du har modtaget en Gave!",unlockedPONG:"Vi har tilføjet PONG på menuen!",pause:"pause",back:"tilbage",exit:"Hold",copyright:"&copy; 1897",youLose:"<h1>0h n0!</h1>",youWin:"<h1>EN VINNER<br>Og det er dig!</h1>",getReady:"Parat!",bestTime:"Bedste tid",yourTime:"Din tid",replay:"Prøv igen!",resume:"Fortsæt!",theEnd:"SLUT",playerOne:"Aktør Et",playerTwo:"Aktør To",useWSAD:"Brug W + S + A + D !",settingsTitle:"BACKSTAGE",musicEnabled:"Pianisten spiller<br>the Blue Goose Rag!",musicDisabled:"Pianisten skred!<br>&nbsp;",effectsEnabled:"Projektøren ryster!",effectsDisabled:"Projektøren er stabil!",toggleGoogleplayEnabled:"Log ud af Google Play.",toggleGoogleplayDisabled:"Log ind i Google Play.",toggleGamecenterEnabled:"Logget ind i Game Center.",toggleGamecenterDisabled:"Log ind i Game Center.",fpsEnabled:"Autentisk 12 FPS<br>er på!",fpsDisabled:"Autentisk 12 FPS<br>er slukket!",language:"Sproget er Dansk!",paused:"PAUSE!",pausedMessage:"Sodavand kan købes in kantinen!",pausedTrialMessage:"Sodavand og in-app-purchases kan købes in kantinen!",buyFullVersion:"Ja! SHUT UP <br>AND TAKE MY MONEY!",noThanks:"Nej tak",buyMsg1:"Køb den",buyMsg2:"FULDE VERSION",buyMsg3:"Og nyd",buyMsg4:"ALLE PERFORMANCES!",buyMsg5:"INGEN SALGS PITCHES!",giveMeAllStages:"GIV MIG ALLE PERFORMANCES!",restorePurchase:"Genskab mine indkøb!",couldNotRestorePurchase:"Kunne ikke genskabe dine indkøb.",lockedMsg1:"POKKERS!",lockedMsg2:"DEN ER LÅST!",lockedMsg3:"Af den gniger af en udvikler!",lockedMsg4:"TIP! Du kan se alle performances!",thanks:"TAK!",enjoyAwesome:"NYD DET AWESOME!",error:"Noget gik galt!",creditsPerformanceBy:"En performance af",creditsDirectedBy:"dirigeret af",creditsThanks:"Tak!",getTheApp:"Få app!"}}),Language.register({id:"ru",name:"Russian",size:.9,strings:{presents:"С гордостью представляет...",directedBy:"<h3>Кино<br>Режиссер</h3><h1>Мартин Коол</h1>",title:"CONTRANOID",onePlayer:"ОДИН актер!",twoPlayer:"ДВА актера!",spectate:"Наблюдать!",settings:"За кулисами!",stageTitle:"КИНО",stage1:"<b>1.</b> Очень короткое!",stage2:"<b>2.</b> Короткое!",stage3:"<b>3.</b> Нормальное!",stage4:"<b>4.</b> Длиииинное!",stage5:"<b>5.</b> На всю ночь!",pongMode:"... или ПОНГ!",youHaveGift:"ВАМ ПОДАРОК!",unlockedPONG:"ПОНГ добавлен в меню!",pause:"пауза",back:"назад",exit:"выход",copyright:"&copy; 1897",youLose:"<h1>В0т блин!</h1>",youWin:"<h1>ВЫ<br>ВЫИГРАЛИ!</h1>",getReady:"НА СТАРТ! ВНИМАНИЕ!",bestTime:"Лучшее время",yourTime:"Ваше время",replay:"Еще раз!",resume:"Вернуться!",theEnd:"КОНЕЦ",playerOne:"Первый актер",playerTwo:"Второй актер",useWSAD:"Использовать W+S+A+D!",settingsTitle:"ЗА КУЛИСАМИ",musicEnabled:"Пианист играет <br>the Blue Goose Rag!",musicDisabled:"Пианист ушел!<br>&nbsp;",effectsEnabled:"Проектор трясется!",effectsDisabled:"Проектор в норме!",toggleGoogleplayEnabled:"Выйти из Google Play.",toggleGoogleplayDisabled:"Войти в Google Play.",toggleGamecenterEnabled:"Вы вошли в Game Center.",toggleGamecenterDisabled:"Войти в Game Center.",fpsEnabled:"Включить 12 кадров<br>в сек!",fpsDisabled:"Выключить 12 кадров<br>в сек!",language:"Установлен русский язык!",paused:"ПАУЗА!",pausedMessage:"Прохладительные напитки можно приобрести за стойкой бара!",pausedTrialMessage:"Прохладительные напитки и in-app purchases можно приобрести за стойкой бара!",buyFullVersion:"ДА! <br>ВОТ МОИ ДЕНЬГИ!",noThanks:"Благодарю, но нет",buyMsg1:"купить",buyMsg2:"ПОЛНУЮ ВЕРСИЮ",buyMsg3:"и насладиться",buyMsg4:"ВСЕМИ ПРЕДСТАВЛЕНИЯМИ!",buyMsg5:"БЕЗ РАСХВАЛИВАНИЙ ТОВАРА!",giveMeAllStages:"ДАЙТЕ МНЕ ВСЕ ПРЕДСТАВЛЕНИЯ!",restorePurchase:"Восстановить мою покупку!",couldNotRestorePurchase:"Не удалось восстановить покупку.",lockedMsg1:"НУ ВОТ!",lockedMsg2:"ЗАБЛОКИРОВАНО!",lockedMsg3:"Этим жадиной разработчиком!",lockedMsg4:"СОВЕТ! Вы можете просмотреть все представления!",thanks:"СПАСИБО!",enjoyAwesome:"НАСЛАЖДАЙТЕСЬ ЧУДЕСНЫМ!",error:"Что-то не так!",creditsPerformanceBy:"Кино от",creditsDirectedBy:"Режиссер",creditsThanks:"Спасибо!",getTheApp:"Cкачать приложение!"}}),Language.register({id:"tr",name:"Türkçe",strings:{presents:"Gururla sunar...",directedBy:"<h3>Bir <b>Martin Kool</b> performansı</h1>",title:"CONTRANOID",onePlayer:"TEK aktör!",twoPlayer:"İKİ aktör!",spectate:"İzleyici!",settings:"Perde arkası!",stageTitle:"PERFORMANS",stage1:"<b>1.</b> Acayip kısa!",stage2:"<b>2.</b> Kısa!",stage3:"<b>3.</b> Normal!",stage4:"<b>4.</b> Upuzun!",stage5:"<b>5.</b> Sabaha kadar!",pongMode:"... veya PONG!",youHaveGift:"BİR HEDİYEN VAR!",unlockedPONG:"PONG'u menüye ekledik!",pause:"ara ver",back:"geri",exit:"çıkış",copyright:"&copy; 1897",youLose:"<h1>N'ayır N'olamaz!</h1>",youWin:"<h1>SEN BİR<br>ŞAMPİYONSUN!</h1>",getReady:"HAZIR OL!",bestTime:"En iyi süre",yourTime:"Senin süren",replay:"Tekrar!",resume:"Devam et!",theEnd:"SON",playerOne:"Birinci Aktör",playerTwo:"İkinci Aktör",useWSAD:"W + S + A + D tuşlarını kullan!",settingsTitle:"PERDE ARKASI",musicEnabled:'Piyanist<br>"the Blue Goose Rag" çalıyor!',musicDisabled:"Piyanist binayı terk etti!<br>&nbsp;",effectsEnabled:"Projektör sallanıyor!",effectsDisabled:"Projektör sabit!",toggleGoogleplayEnabled:"Google Play'den çık.",toggleGoogleplayDisabled:"Google Play'e giriş yap.",toggleGamecenterEnabled:"Game Center'a giriş yapıldı.",toggleGamecenterDisabled:"Game Center'a giriş yap.",fpsEnabled:"Otantik 12 FPS<br>AÇIK!",fpsDisabled:"Otantik 12 FPS<br>KAPALI!",language:"Dil ayarı Türkçe!",paused:"ARA!",pausedMessage:"Çayları kantinden söyleyebilirsin!",pausedTrialMessage:"Çaylar ve uygulama-içi alışveriş kantinde!",buyFullVersion:"SATIN AL BU UYGULAMAYI!<br>AL AL AL!",noThanks:"Yok ben almayayım",buyMsg1:"satın al",buyMsg2:"TAM SÜRÜM",buyMsg3:"ve keyfini çıkar",buyMsg4:"TÜM PERFORMANSLAR!",buyMsg5:"BİZDE BOŞ LAF YOK!",giveMeAllStages:"BANA TÜM PERFORMANSLARI VER!",restorePurchase:"Satın almayı iptal et!",couldNotRestorePurchase:"Satın alma iptal edilemedi.",lockedMsg1:"TÜH!",lockedMsg2:"KİLİTLİ!",lockedMsg3:"Hep şu pinti yazılımcı yüzünden!",lockedMsg4:"TÜYO! Bütün performansları izleyebilirsin!",thanks:"TEŞEKKÜRLER!",enjoyAwesome:"KEYFİNİ ÇIKAR!",error:"Bir hata oluştu!",creditsPerformanceBy:"Sahneleyenler:",creditsDirectedBy:"Yönetmen:",creditsThanks:"Teşekkürler!",getTheApp:"Uygulamayı indir!"}});var Game=new function(){function e(){(function(){var e=["@kamilafsar","@kriztynna","@michielpostnl","@boab","@mwessendorf","@duinmarcel","@afkatja","@kalw4","KR=10","@m0rph3v5","@rahul","@remcoder","@rilemtwit","TonioGela"];e=e.sort((function(e,t){return(e=e.toLowerCase().replace(/^@/g,""))==(t=t.toLowerCase().replace(/^@/g,""))?0:t>e?-1:e>t?1:void 0}));for(var t="",a=0;a<e.length;a++){t+=e[a],a%2==0&&(t+=" "),a%2==1&&(t+="<br>")}t=t.replace(/\<br\>$/,""),$("[data-credits]").html(t)})(),window.Analytics&&Analytics.init(),Language.init(),elGame=$("#game")[0],elGrain=$("#grain")[0],L&&console.log("Game.init"),filmEffects=Storage.getDataValue("filmEffects",!0),authenticFPS=Storage.getDataValue("authenticFPS",!0),music=Storage.getDataValue("music",!0),fullVersion=Storage.getDataValue("fullVersion",!1),window.isWebApp&&!L&&(fullVersion=!1),pongEnabled=Storage.getDataValue("pongEnabled",!1),adsEnabled=!fullVersion,T(),document.addEventListener("pause",m),document.addEventListener("resume",b),document.addEventListener("backbutton",s,!1),window.isWebApp||$(document).on("touchstart mousedown","#games a",(function(e){var t=$(e.target).closest("a").attr("href");return $.browser.android?navigator.app.loadUrl(t,{openExternal:!0}):$.browser.ios&&window.open(t,"_system"),e.preventDefault(),e.stopPropagation(),!1})),window.WinJS&&(WinJS.Application.onbackclick=s),$(document).on("keydown",(function(e){if(27==e.keyCode)return s(),!1;var t=String.fromCharCode(e.keyCode).toLowerCase();"0"==t&&o("player",0),"1"==t&&o("player",1),"2"==t&&o("player",2),"3"==t&&o("size",3),"4"==t&&o("size",4),"5"==t&&o("size",5),"6"==t&&o("size",6),"7"==t&&o("size",7)})),$(document).on("touchstart mousedown","[data-action]",i),$(document).on("touchend mouseup",n),$(document).on("contextmenu",(function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})),window.isLite&&(fullVersion=!0),window.isLite||window.isWebApp||$('[data-lang="getTheApp"]').hide(),(!$.browser.android||window.isWebApp)&&($(".icon-button.googleplay").hide(),$('[data-action="toggleGoogleplay"]').hide()),(!$.browser.ios||window.isWebApp)&&($(".icon-button.gamecenter").hide(),$('[data-action="toggleGamecenter"]').hide()),$("#container").append('<canvas id="scratch-canvas"/>'),canvas=$("#scratch-canvas")[0],ctx=canvas.getContext("2d"),$(window).on("resize",t),t(),Sound.init(music),Store.init(),window.Film&&Film.enabled?Film.init():(Sound.doAction("piano"),L?l():autoTimeout=setTimeout(r,1100)),Framer.addHandler(f)}function t(e){var t={iphone4:{width:320,height:480},iphone5:{width:320,height:568},nexus5:{width:360,height:640},nexus7:{width:604,height:966},ipad:{width:768,height:1024}};for(var i in e&&(t[e.id]=e),t)t[i].id=i;screenSize={width:$("#feelsize").width(),height:$("#feelsize").height()};var n=screenSize.width/screenSize.height,o="iphone4",s=t[o],r=999;for(var l in t){$("html").removeClass("aspect-"+l);var d=t[l],c=d.width/d.height,h=Math.abs(n-c);r>h&&(o=l,s=t[l],r=h,L&&console.log("closest device is "+l))}$("html").addClass("aspect-"+o),n=s.width/s.height,sizeToWidth=screenSize.width/screenSize.height<n,device=s,viewport={width:Math.floor(sizeToWidth?screenSize.width:screenSize.height/s.height*s.width),height:Math.floor(sizeToWidth?screenSize.width/s.width*s.height:screenSize.height)},grainOffset=.5/320*viewport.width,canvas.width=viewport.width,canvas.height=viewport.height,$("#container").css({width:viewport.width+"px",height:viewport.height+"px"}),a(),Gameplay.resize()}function a(){var e=viewport.width,t=1.4;device&&device.landscape&&(t=.8),device&&"ipad"==device.id&&(t=1.3),t*=Language.size,$("h1").css("font-size",Math.round(.08*e*t)+"px"),$("h2").css({"font-size":Math.round(.06*e*t)+"px","line-height":Math.round(.09*e*t)+"px"}),$("h3").css("font-size",Math.round(.05*e*t)+"px"),$("h4").css("font-size",Math.round(.05*e*t)+"px"),$("h5").css({"font-size":Math.round(.06*e*t)+"px","line-height":Math.round(.08*e*t)+"px"}),$("#messages h2").css({"font-size":Math.round(.06*e)+"px","line-height":Math.round(.08*e*t)+"px"}),$("small").css({"font-size":Math.round(.05*e)+"px","line-height":Math.round(.06*e*t)+"px"}),$(".divider").css({"font-size":Math.round(.07*e)+"px",margin:Math.round(.06*e)+"px"}),$(".edges").css("font-size",Math.round(.13*e)+"px"),$("#gameplay .edges").css("font-size",Math.round(.1*e)+"px")}function i(e){var t=$(e.target).closest("*[data-action]");t.addClass("pressed"),$pressed=t}function n(e){if($pressed&&$pressed.length&&$pressed.removeClass("pressed"),window.Utils&&Utils.isDoubleTapBug(e))return!1;var t=$(e.target).closest("*[data-action]"),a=$(e.target).closest("*[data-action]").attr("data-action"),i=t.attr("data-value");return a?(o(a,i),!1):void 0}function o(e,t){switch(L&&console.log("doAction",e,t),clearTimeout(autoAdvanceTOH),e){case"set-lang":!function(e){Language.set(e),o("settings")}(t);break;case"back":onHomeScreen||(Gameplay.pause(),l());break;case"achievements":PlayCenter.showAchievements();break;case"leaderboards":PlayCenter.showLeaderboard();break;case"playcenter":$.browser.ios&&!window.isWebApp&&PlayCenter.enabled&&!PlayCenter.isSignedIn&&($("#playcenter").addClass("spin"),PlayCenter.signIn());case"sign-out":PlayCenter.signOut();break;case"sign-in":PlayCenter.signIn();break;case"player":players=t,window.isLite&&!pongEnabled?g(players,5):d();break;case"size":g(players,t);break;case"show-stages":d();break;case"show-menu":l();break;case"a-game-by":x();break;case"after-get-ready":p();break;case"settings":h();break;case"music":music=Storage.getDataValue("music",!0),music=!music,Storage.setDataValue("music",music),music?(Sound.enable(),Sound.resumeAll()):(Sound.pauseAll(),Sound.disable()),T();break;case"effects":filmEffects=Storage.getDataValue("filmEffects",!0),filmEffects=!filmEffects,Storage.setDataValue("filmEffects",filmEffects),T();break;case"fps":authenticFPS=Storage.getDataValue("authenticFPS",!0),authenticFPS=!authenticFPS,Storage.setDataValue("authenticFPS",authenticFPS),T();break;case"theend":y();break;case"replay":g(currentPlayerCount,currentSize);break;case"exit":!adsEnabled||skipAdAction||window.isLite?(gameStarted=!1,o("back")):(skipAdAction=e,v());break;case"showAd":v();break;case"gotoad":adUrl?(window.isWebApp?window.open(adUrl,"_blank"):$.browser.android?navigator.app.loadUrl(adUrl,{openExternal:!0}):window.open(adUrl,"_system"),P()):o("back");break;case"skip":o(skipAdAction),skipAdAction=null;break;case"pause":S();break;case"resume":A();break;case"show-iap":k();break;case"buy-iap":L?confirm("Unlock the Full Version?")&&M():Store.buyFullVersion();break;case"not-buying":o("back");break;case"about":case"credits":c();break;case"credits2":c(2);break;case"get-the-app":!function(){if($.browser.ios)return o("install-ios");if($.browser.android)return o("install-android");var e="";e+='<h2 data-action="install-ios">iOS</h2>',e+='<h2 data-action="install-android">ANDROID</h2>',e+='<h2 data-action="install-windows-phone">WINDOWS PHONE</h2>',Game.showMessages({text:e},{text:"<h1>"+lang("getTheApp").toUpperCase()+"</h1>"},{action:"not-buying",text:lang("noThanks")})}();break;case"signin":PlayCenter.signIn(!1,G);break;case"signout":PlayCenter.signOut(G);break;case"toggleGoogleplay":case"toggleGamecenter":PlayCenter.isSignedIn?PlayCenter.signOut(G):PlayCenter.signIn(!1,G);break;case"language":N();break;case"restore-purchase":Store.restorePurchases(!0);break;case"pong":g(players,t);break;case"enablePong":D();break;case"install-ios":O("ios");break;case"install-android":O("android");break;case"install-windows-phone":O("windowsPhone")}}function s(){if(onHomeScreen){if(window.isWebApp)return;Sound.pauseAll(),window.WinJS?window.close():navigator.app&&navigator.app.exitApp()}else if(gameStarted&&!onText)o("pause");else{var e=$(".screen:visible .back-button:visible").attr("data-action");e||(e="back"),o(e)}return!0}function r(){var e=$("#q42");$(".screen").not(e).hide(),e.addClass("wait").show(),setTimeout((function(){e.removeClass("wait")}),0),autoTimeout&&(clearTimeout(autoTimeout),autoTimeout=setTimeout(x,2650))}function l(){autoTimeout&&clearTimeout(autoTimeout),menuShown||(menuShown=!0,PlayCenter.enabled&&!PlayCenter.isSignedIn&&PlayCenter.autoSignIn(G)),$("html").removeClass("actor1 actor2 actors spectate");var e=$("#menu");$(".screen").not(e).hide(),e.addClass("wait").show(),setTimeout((function(){e.removeClass("wait")}),0),onHomeScreen=!0,onText=!1,skipAdAction=null}function d(){pongEnabled?$('[data-lang="pongMode"]').show():$('[data-lang="pongMode"]').hide(),window.isLite&&($('[data-lang="stage1"],[data-lang="stage2"],[data-lang="stage4"],[data-lang="stage5"]').hide(),$('[data-lang="stage3"]').html("Contranoid..."),T()),$("html").removeClass("actor1 actor2 actors spectate"),0==players&&$("html").addClass("spectate"),1==players&&$("html").addClass("actor1 actors"),2==players&&$("html").addClass("actor2 actors");var e=$("#arena");$(".screen").not(e).hide(),e.addClass("wait").show(),setTimeout((function(){e.removeClass("wait")}),0),onHomeScreen=!1,onText=!0}function c(e){var t=$("#credits"+(e||""));$(".screen").not(t).hide(),t.addClass("wait").show(),setTimeout((function(){t.removeClass("wait")}),0),onHomeScreen=!1,onText=!0}function h(){var e=$("#settings");$(".screen").not(e).hide(),e.addClass("wait").show(),setTimeout((function(){e.removeClass("wait")}),0),onHomeScreen=!1,onText=!0}function u(){var e=$("#gameplay");$(".screen").not(e).hide(),e.addClass("wait").show(),setTimeout((function(){e.removeClass("wait")}),0),onText=!1,onHomeScreen=!1}function g(e,t){if(!fullVersion&&!window.isLite){if(1==e&&Utils.contains([3,6,7],t))return E();if(2==e&&Utils.contains([5,6,7],t))return E()}currentPlayerCount=e,currentSize=t,0==e?p():function(){var e={action:"after-get-ready",text:"<h1>"+lang("getReady")+"</h1>",autoAdvance:!0},t=null;if(1==currentPlayerCount){var a=Storage.getDataValue("bestTimeSize"+currentSize,0);if(!isNaN(a)&&a>=1&&a!=60*currentSize*1e3){var i=parseInt(a%1e3),n=parseInt(a/1e3%60),o=parseInt(a/6e4%60),s=parseInt(a/36e5%24),r=Utils.padLeft(n,o||s?2:1)+'<span class="ms">.'+Utils.padLeft(i,3)+"</span>";(o||s)&&(r=s?s+":"+Utils.padLeft(o,2)+":"+r:o+":"+r),e.text+="<h4>"+lang("bestTime")+": "+r+"</h4>"}}2==currentPlayerCount&&(e.text="<h2>"+lang("playerOne")+"</h2>"+e.text,t={text:"<h2>"+lang("playerTwo")+"</h2><h1>"+lang("getReady")+"</h1>",inverted:!0},$.browser.desktop&&(t.text+="<h4>"+lang("useWSAD")+"</h4>")),Game.showMessages(e,t)}()}function p(){var e=0==currentPlayerCount,t=currentPlayerCount<2;Gameplay.start({demo:e,ai:t,size:currentSize,pong:"pong"==currentSize}),onHomeScreen=!1,gameStarted=!0,u()}function f(){cycleTime=new Date,function(){if(filmEffects&&!(cycleTime<nextGrain)){var e=Utils.between(-grainOffset,grainOffset,4),t=Utils.between(-grainOffset,grainOffset,4),a=Utils.between(29,31)/100;elGame.style.webkitTransform="translate3d("+e+"px, "+t+"px, 0)",elGame.style.transform="translate3d("+e+"px, "+t+"px, 0)",elGrain.style.opacity=a,nextGrain=new Date((new Date).getTime()+50);for(var i=0;i<scratches.length;i++){var n=scratches[i];ctx.clearRect(n[0],n[1],n[2]-n[0],n[3]-n[1])}scratches=[];var o=Utils.between(1,5);ctx.fillStyle="rgba(0,0,0,0.3)";for(i=0;o>i;i++){e=Utils.between(0,viewport.width);t=Utils.between(0,viewport.height),ctx.beginPath(),ctx.arc(e,t,Utils.between(.1,3,2),0,pi2,!0),ctx.fill(),scratches.push([e-4,t-4,e+4,t+4])}var s=Utils.between(1,5);ctx.lineWidth=.2,ctx.strokeStyle="rgba(0,0,0,0.7)";for(i=0;s>i;i++){e=Utils.between(0,viewport.width);t=Utils.between(0,viewport.height),dy=Utils.between(-viewport.height/2,viewport.height,2),ctx.beginPath(),ctx.moveTo(e,t),ctx.lineTo(e,t+dy),ctx.stroke();var r=dy>=0?t:t+dy,l=dy>=0?t+dy:t;scratches.push([e-1,r-1,e+1,l+1])}}}()}function m(){Sound.pauseAll()}function b(){Sound.resumeAll()}function w(e,t,i){$("#messages").removeClass("two inverted"),t&&(t.text&&$('#top-message [data-role="msg"]').html(t.text),$("#messages").addClass("two"),t.inverted&&$("#messages").addClass("inverted")),e.text&&$('#bottom-message [data-role="msg"]').html(e.text),""==e.action||e.action?$("#messages").attr("data-action",e.action):$("#messages").attr("data-action","back"),i?($("#messages-back-button").show(),$("#messages-back-button").attr("data-action",i.action?i.action:"back"),$("#messages-back-button").html(i.text?i.text:lang("back"))):$("#messages-back-button").hide(),$("#top-message [data-action], #bottom-message [data-action]").each((function(){var e=$(this),t=e.html();e.html(clickablePrefix+t)}));var n=$("#messages");if($(".screen").not(n).hide(),n.addClass("wait").show(),setTimeout((function(){n.removeClass("wait")}),0),onHomeScreen=!1,a(),onText=!0,e.autoAdvance){"boolean"==typeof e.autoAdvance&&(e.autoAdvance={});var s=e.autoAdvance;s.action=s.action||e.action,s.duration=s.duration||autoAdvanceDuration,clearTimeout(autoAdvanceTOH),autoAdvanceTOH=setTimeout((function(){o(s.action)}),s.duration)}}function y(){Game.showMessages({action:"",autoAdvance:!0,text:'<h1><span data-action="replay">'+lang("replay")+"<span></h1>"},{text:"<h1>"+lang("theEnd")+"</h1>"},{action:"exit",text:lang("exit")})}function v(){!L&&window.isWebApp?function(){var e="";$.browser.ios?e+='<h2 data-action="install-ios">'+lang("getTheApp").toUpperCase()+"</h2>":$.browser.android?e+='<h2 data-action="install-android">'+lang("getTheApp").toUpperCase()+"</h2>":(e="<small>"+lang("getTheApp")+"</small>",e+='<h2 data-action="install-ios">iOS</h2>',e+='<h2 data-action="install-android">ANDROID</h2>',e+='<h2 data-action="install-windows-phone">WINDOWS PHONE</h2>'),Game.showMessages({action:"buy-iap",text:e},{text:"<small>"+lang("buyMsg1")+"</small><h1>"+lang("buyMsg2")+"</h1><small>"+lang("buyMsg3")+"<br>"+lang("buyMsg4")+"</small>"},{action:"not-buying",text:lang("noThanks")})}():k()}function T(){for(var e in F){var t=F[e],a=$(t.selector);t.enabled()?t.handler?a.html(t.handler()):a.html(lang(e+"Enabled")):a.html(lang(e+"Disabled")),a.each((function(){var e=$(this),t=e.html();e.html(clickablePrefix+t)}))}fullVersion?$("html").removeClass("trial").addClass("full-version"):$("html").removeClass("full-version").addClass("trial"),$("h1[data-action], h2[data-action], h5[data-action]").each((function(){var e=$(this),t=e.html();e.find(".clickable-prefix").length||e.html(clickablePrefix+t)}))}function S(){if(I){if(!R)return Gameplay.pause(),void(R=!0);R=!1}else Gameplay.pause();fullVersion||!L&&window.isWebApp||window.isLite?Game.showMessages({action:"resume",text:'<h1 data-action="resume">'+lang("resume")+"</h1>"},{text:"<h1>"+lang("paused")+"</h1><h3><br>"+lang("pausedMessage")+"</h3>"},{action:"exit",text:lang("exit")}):Game.showMessages({action:"resume",text:'<h1 data-action="resume">'+lang("resume")+"</h1>"},{text:"<h1>"+lang("paused")+"</h1><h3><br>"+lang("pausedTrialMessage")+"</h3>"},{action:"exit",text:lang("exit")})}function A(){u(),setTimeout((function(){Gameplay.resume()}),300)}function k(){Game.showMessages({action:"buy-iap",text:'<h2 data-action="buy-iap">'+lang("buyFullVersion")+'</h2><small data-action="restore-purchase">'+lang("restorePurchase")+"</small>"},{text:"<small>"+lang("buyMsg1")+"</small><h1>"+lang("buyMsg2")+"</h1><small>"+lang("buyMsg3")+"<br>"+lang("buyMsg4")+"</small>"},{action:"not-buying",text:lang("noThanks")})}function E(){return!L&&window.isWebApp?function(){var e="";$.browser.ios?e+='<h2 data-action="install-ios">'+lang("getTheApp").toUpperCase()+"</h2>":$.browser.android?e+='<h2 data-action="install-android">'+lang("getTheApp").toUpperCase()+"</h2>":(e="<small>"+lang("getTheApp")+"</small>",e+='<h2 data-action="install-ios">iOS</h2>',e+='<h2 data-action="install-android">ANDROID</h2>',e+='<h2 data-action="install-windows-phone">WINDOWS PHONE</h2>'),Game.showMessages({action:"show-stages",text:e},{text:"<h1>"+lang("lockedMsg1")+"</h1><h2>"+lang("lockedMsg2")+"</h2><h3>"+lang("lockedMsg3")+"</h3><small>"+lang("lockedMsg4")+"</small>"},{action:"show-stages"})}():void Game.showMessages({action:"show-stages",text:'<h2 data-action="show-iap">'+lang("giveMeAllStages")+"</h2>"},{text:"<h1>"+lang("lockedMsg1")+"</h1><h2>"+lang("lockedMsg2")+"</h2><h3>"+lang("lockedMsg3")+"</h3><small>"+lang("lockedMsg4")+"</small>"},{action:"show-stages"})}function M(){C(),Game.showMessages({action:"back",autoAdvance:!0,text:"<h2>"+lang("enjoyAwesome")+"</h2>"},{text:"<h1>"+lang("thanks")+"</h1>"})}function x(){Game.showMessages({action:"show-menu",text:lang("directedBy"),autoAdvance:{duration:1890}})}function P(){Game.showMessages({action:"skip",text:"<h1>"+lang("thanks")+"</h1>"})}function D(){Game.showMessages({action:"theend",text:"<h1>"+lang("unlockedPONG")+"</h1>"},{text:"<h1>"+lang("youHaveGift")+"</h1>"}),pongEnabled=!0,Storage.setDataValue("pongEnabled",!0)}function C(){(!window.isWebApp||L)&&(fullVersion=!0,adsEnabled=!1,T(),Storage.setDataValue("fullVersion",!0),PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.payToWin))}function G(){T()}function O(e){var t;switch(e){case"ios":t="https://itunes.apple.com/us/app/contranoid/id1027717534?mt=8";break;case"android":t="https://play.google.com/store/apps/details?id=com.q42.contranoid";break;case"windowsPhone":t="https://www.microsoft.com/store/apps/9NBLGGH1ZJD0"}t&&($.browser.chromeWebStore?window.open(t):document.location.href=t)}function N(){var e="";for(var t in Language.languages){e+='<h3 style="padding: 5px 0 !important" data-action="set-lang" data-value="'+t+'">'+Language.languages[t].name+"</h3>"}Game.showMessages({text:e},null,{action:"settings"})}var L=!1,I=!1,R=!1;tweet=window.isWebApp,facebook=window.isWebApp&&!$.browser.chromeWebStore,onHomeScreen=!0,gameStarted=!1,onText=!1,autoTimeout=0,pi2=2*Math.PI,device=null,fullVersion=!1,adsEnabled=!0,pongEnabled=!1,skipAdAction=null,adUrl=null,adIndex=0,players=1,nextGrain=0,screenSize={},viewport={},grainOffset=1,canvas=null,ctx=null,scratches=[],filmEffects=!0,authenticFPS=!0,music=!0,currentPlayerCount=0,currentSize=0,elGame=null,elGrain=null,$pressed=null,autoAdvanceTOH=0,autoAdvanceDuration=2500,clickablePrefix='<span class="clickable-prefix">J</span> ',menuShown=!1;var F={music:{selector:'[data-action="music"]',enabled:function(){return music}},effects:{selector:'[data-action="effects"]',enabled:function(){return filmEffects}},toggleGoogleplay:{selector:'[data-action="toggleGoogleplay"]',enabled:function(){return $.browser.android&&PlayCenter.isSignedIn}},fps:{selector:'[data-action="fps"]',enabled:function(){return authenticFPS}},language:{selector:'[data-action="language"]',enabled:function(){return!0},handler:function(){return lang("language")}}};this.init=function(){Storage.init(e)},this.resize=t,this.showMenu=l,this.showStages=d,this.showSettings=h,this.showMessages=w,this.showGame=u,this.endGame=function(){gameStarted=!1,l()},this.startGame=g,this.showMessages=w,this.showTheEnd=y,this.showAd=v,this.showQ42=r,this.pause=S,this.resume=A,this.showIAP=k,this.showLocked=E,this.thanksForTheAd=P,this.showTitle=function(){Game.showMessages({action:"show-menu",text:"<h1>"+lang("title")+"</h1>"})},this.buyIAPApproved=M,this.errorIAP=function(){Game.showMessages({action:"back",autoAdvance:!0,text:"<h1>"+lang("error")+"</h1>"})},this.unlockFullVersion=C,this.enablePong=D,this.updateStrings=T,this.showLanguages=N,this.__defineGetter__("debug",(function(){return L})),this.__defineGetter__("filmEffects",(function(){return!!filmEffects})),this.__defineGetter__("authenticFPS",(function(){return!!authenticFPS})),this.__defineGetter__("fullVersion",(function(){return fullVersion})),this.__defineGetter__("pongEnabled",(function(){return pongEnabled}))},Gameplay=new function(){function e(){G||(D.init(Pe,Ce,Ge),G=!0,function(){if(L){var e={top:0,bottom:0};$(document).on("touchstart","#gameplay",(function(t){if(ee)return!1;if(!Z){for(var a=t.originalEvent.touches,i=0;i<a.length;i++){var n=a[i];(n.pageX,te.xFactor,te.left,n.pageY/te.yFactor-te.top)<te.halfHeight?e.top=new Date:e.bottom=new Date}return!1}})),$(document).on("touchend","#gameplay",(function(t){if(ee)return!1;if(!Z)for(var i=t.originalEvent.changedTouches,n=0;n<i.length;n++){var o=i[n],s=o.pageX/te.xFactor-te.left,r=o.pageY/te.yFactor-te.top;if(r<te.halfHeight)200>new Date-e.top&&a(ue||ge,s,r);else 200>new Date-e.bottom&&a(ge,s,r)}})),$(document).on("touchmove","#gameplay",(function(e){if(ee)return!1;if(!Z){var t=[];e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length>0?t=e.originalEvent.changedTouches:e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),W=!0;for(var a=0;a<t.length;a++){var i=t[a],n=i.pageX/te.xFactor-te.left,o=i.pageY/te.yFactor-te.top,r=o<te.halfHeight?ue:ge;r||(r=ge),s(n,r),o<te.halfHeight&&(B=!0)}}}))}else $(document).on("click","#gameplay",(function(e){return!ee&&(!Z&&void a((e.pageX,te.xFactor,te.left,e.pageY/te.yFactor-te.top)<te.halfHeight&&I?ue:ge))})),window.PointerEvent?$(document).on("pointermove","#gameplay",(function(e){if(ee)return!1;if(Z)return!1;W=!0;var t=e.originalEvent.clientX/te.xFactor-te.left,a=e.originalEvent.clientY/te.yFactor-te.top;s(t,a<te.halfHeight&&I?ue:ge),a<te.halfHeight&&(B=!0)})):$(document).on("mousemove","#gameplay",(function(e){if(ee)return!1;if(Z)return!1;W=!0;var t=e.pageX/te.xFactor-te.left,a=e.pageY/te.yFactor-te.top;s(t,Ce[1]),a<te.halfHeight&&(B=!0)})),Oe={},$(document).on("keydown","html",(function(e){Oe[e.keyCode]=!0})),$(document).on("keyup","html",(function(e){delete Oe[e.keyCode]}))}(),Framer.addHandler(d))}function t(){var e=$("#gameplay"),t=e.offset();te.left=t.left,te.top=t.top,te.width=e.width(),te.height=e.height(),te.realWidth=e.width(),te.realHeight=e.height(),te.xFactor=te.realWidth/te.width,te.yFactor=te.realHeight/te.height,te.halfHeight=Math.round(te.height/2),re=se*te.height,de.width=Math.round(de.t.w*te.width),de.height=Math.round(de.width*de.t.h),de.half=Math.round(de.width/2),de.maxSpeed=de.maxSpeedFactor*te.width,ne=Math.round(ie*te.width),oe=Math.round(ne/2),pe.width=Math.ceil(pe.t.w*te.width),pe.height=Math.ceil(pe.width*pe.t.h),pe.halfWidth=Math.ceil(pe.width/2),pe.halfHeight=Math.ceil(pe.height/2),pe.fallTemplate.width=pe.fallTemplate.w*te.width,pe.fallTemplate.height=pe.fallTemplate.h*pe.fallTemplate.width,pe.fallTemplate.halfWidth=Math.round(pe.fallTemplate.width/2),pe.fallTemplate.halfHeight=Math.round(pe.fallTemplate.height/2),pe.catchThresholdForAi=te.height*pe.catchThresholdForAiFactor,he=te.width*ce,D.resize()}function a(e,t,a){Y||(Y=!0,q=(new Date).getTime());var i=J&&ue.sticky&&0==ue.ballsLost;if(e&&!i)e.sticky&&(n(e,t,a),e.sticky=!1);else for(var o in Ce){(e=Ce[o]).sticky&&(e.ai?n(e):n(e,t,a))}}function i(e,t){e.width=t,e.half=Math.round(t/2)}function n(e,t,a){for(var i in Ge){var n=Ge[i];if(n.sticky){var o=Ce[n.sticky];if(e.id==o.id){var s=(t-e.x)/de.half;e.sticky=!1,n.sticky=0,dirX=n.dirX||s||1*Math.random()-.5,p(n,dirX),"top"==o.pos&&(n.vy=-n.vy)}}}}function o(e){e.x=Math.max(0,Math.min(te.width,e.x))}function s(e,t){t.x=e,o(t)}function r(){for(var e in Ge){var t=Ge[e];if(t.sticky){var a=Ce[t.sticky];t.x=a.x-oe+t.stickyX,"bottom"==a.pos?t.y=a.y-ne:t.y=a.y+de.height}else{var i=(a=Ce[t.paddleId]).powerupSlowDownRemoveTime?Ee:1;for(var n in t.x+=t.vx*i,t.y+=t.vy*i,1!=Q&&f(t),(t.x>te.width-ne||t.x<0)&&(t.vx=-t.vx,t.x<0&&(t.x=0),t.x>te.width-ne-1&&(t.x=te.width-ne-1)),t.y<0&&(ue?t.y<-ne&&u(t,!0):t.vy=-t.vy),t.y>te.height&&u(t,!1),Ce)if(1==Q||n==t.paddleId){(a=Ce[n]).invisible||("bottom"==a.pos?t.y>=a.y-ne&&t.y<a.y&&t.vy>=0&&t.x+oe>=a.x-a.half&&t.x-oe<=a.x+a.half&&g(t,a):"top"==a.pos&&t.y<=a.y+de.height&&t.y>a.y+de.height-ne&&t.vy<=0&&t.x+oe>=a.x-a.half&&t.x-oe<=a.x+a.half&&g(t,a))}}}}function l(){if(!ee){R=new Date,Oe&&(Z||(Oe[KEYS.ArrowRight]&&(ge.x+=he,W=!0),Oe[KEYS.ArrowLeft]&&(ge.x-=he,W=!0),Oe[KEYS.ArrowUp]&&a(ge),Oe[KEYS.ArrowDown]&&a(ge),o(ge),1!=players&&(Oe[KEYS.W]&&a(ue),Oe[KEYS.S]&&a(ue),Oe[KEYS.A]&&(ue.x-=he,B=!0),Oe[KEYS.D]&&(ue.x+=he,B=!0),o(ue)))),Y&&(milliSecondsPassed=(new Date).getTime()-q),function(){for(var e in Ce){var t=Ce[e];t.powerupWideRemoveTime&&R>t.powerupWideRemoveTime&&S(t),t.powerupSmallRemoveTime&&R>t.powerupSmallRemoveTime&&A(t),t.powerupSlowDownRemoveTime&&R>t.powerupSlowDownRemoveTime&&(t.powerupSlowDownRemoveTime=void 0),t.restoreBallTime&&R>t.restoreBallTime&&(t.restoreBallTime=void 0,0===t.balls&&(t.powerupInvisibleRemoveTime=void 0,t.invisible=!1,t.sticky=!0,m(!0,e),t.ai&&v(t))),t.powerupInvisibleRemoveTime&&R>t.powerupInvisibleRemoveTime&&(t.powerupInvisibleRemoveTime=void 0,t.invisible=!1),t.powerupLockedRemoveTime&&R>t.powerupLockedRemoveTime&&(t.powerupLockedRemoveTime=void 0,t.locked=!1)}}(),r(),function(){for(var e in Pe){var t=Pe[e];t.y+=t.speed,t.speed>=0?(t.y>te.height&&w(t),(!ge.invisible||xe)&&t.y>ge.y-pe.fallTemplate.height&&t.y<ge.y&&t.x+pe.fallTemplate.width>=ge.x-ge.half&&t.x<=ge.x+ge.half&&y(t,ge)):(t.y<0-pe.fallTemplate.height&&w(t),(!ue.invisible||xe)&&t.y<ue.y+de.height&&t.y>ue.y+de.height-pe.fallTemplate.height&&t.x+pe.fallTemplate.width>=ue.x-ue.half&&t.x<=ue.x+ue.half&&y(t,ue))}}(),J&&(T(ue),Z&&T(ge)),function(){for(var e in Ge){var t=Ge[e];t.sticky||(t.speed+=5e-4)}}(),U=!0;var e=new Date-R,t=Math.max(0,N-e);O=setTimeout(l,t)}}function d(){ee||U&&(D.draw(Z,J,ue,ge),U=!1)}function c(){h(),ee=!1,l(),d()}function h(){clearTimeout(O),cancelAnimFrame(F),ee=!0,R=0,U=!1}function u(e,t){var a=e.paddleId,i=Ce[a];return 1==Q?(t?ue.ballsLost++:ge.ballsLost++,P()):(1==i.id&&!t||2==i.id&&t)&&i.ballsLost++,Sound.doAction("loseBall"),function(e){var t=e.paddleId,a=Ce[t];delete Ge[e.id],a.balls--,a.dx=void 0;var i=0==a.balls;if(1==Q&&(i=a.balls<=0&&x(a).balls<=0),i){var n=a;1==Q&&(n=e.y<0?ue:ge),n.restoreBallTime=new Date((new Date).getTime()+Ae)}D.removeBall(e)}(e),1!=Q?1==e.paddleId&&t?E(ge):2!=e.paddleId||t?void 0:E(ue):void 0}function g(e,t){t.ballsCaught=t.ballsCaught+1||0;var a=2*Math.max(0,Math.min(1,(e.x+oe-t.x+t.half)/de.width))-1;t.sticky?(e.sticky=t.id,e.stickyX=e.x+oe-(t.x+de.half),e.dirX=a):(p(e,a),Sound.doAction("catchBall")),"top"==t.pos&&(e.vy=-e.vy),t.ai&&(t.nextHitOffset=0),1==Q&&t.ballsCaught%t.nextPowerup==0&&function(e){if(new Date-e.lastRedBrickDateTime<500)return void M();e.lastRedBrickDateTime=new Date;var t=e.x-pe.fallTemplate.width/2,a=0,i=++me,n=Utils.between(fe.min,fe.max,5)*fe.factor*te.height,o=e.ai?j:K,s=Utils.pick(o);1==e.id?(a=e.y-pe.fallTemplate.height,n=-n):a=e.y+de.height;var r={id:i,x:t,y:a,speed:n,type:s,paddleId:n>0?1:2};Pe[i]=r}(t)}function p(e,t){var a=e.speed;t=Math.max(-.9,Math.min(.9,t)),e.vx=t*a,e.vy=-Math.sqrt(a*a-e.vx*e.vx)}function f(e){for(var t=[],a=0,i=0,n=null,o=null;a<De.y.length;a++)if(n=De.y[a],e.y+ne>=n&&e.y<=n+pe.height)for(i=0;i<De.x.length;i++)o=De.x[i],e.x+ne>=o&&e.x<=o+pe.width&&t.push({x:i,y:a});t.length&&function(e,t){for(var a=t.x+Math.round(ne/2),i=t.y+Math.round(ne/2),n=[],o=0;o<e.length;o++){var s=(w=e[o]).x*pe.width,r=w.y*pe.height+pe.offsetTop,l=[];if(t.paddleId==ae.bricks[w.x+","+w.y].color){for(var d in Ne){var c=Ne[d],h=s+pe.width*c[0]+c[1],u=r+pe.height*c[2]+c[3],g=Math.abs(a-h),p=Math.abs(i-u),f=Math.sqrt(g*g+p*p);l.push({id:d,dist:f,i:o,side:c[4]})}l.sort((function(e,t){return(e.dist<t.dist?-1:e.dist>t.dist&&1)||0}));var m=l[0].side;("bottom"==m&&t.vy<0||"top"==m&&t.vy>0||"left"==m&&t.vx>0||"right"==m&&t.vx<0)&&n.push(l[0])}}n.sort((function(e,t){return(e.dish<t.dist?-1:e.dist>t.dist&&1)||0}));var b=n[0];if(b){var w;!function(e,t){Sound.doAction("hitBrick");var a=Ce[t.paddleId];a.bricksHit++;var i=ae.bricks[e.x+","+e.y],n=i.color;1==n?(i.color=2,D.drawBackgroundBrick(i.color,i.px,i.py)):2==n&&(i.color=1,D.drawBackgroundBrick(i.color,i.px,i.py)),be&&a.bricksHit%a.nextPowerup==0&&function(e,t){var a=Ce[t.paddleId];if(new Date-a.lastRedBrickDateTime<500)return void M();a.lastRedBrickDateTime=new Date;var i=pe.width*e.x+(pe.width-pe.fallTemplate.width)/2,n=pe.height*e.y+pe.offsetTop+(pe.height-pe.fallTemplate.height)/2,o=++me,s=Utils.between(fe.min,fe.max,5)*fe.factor*te.height,r=a.ai?j:K,l=Utils.pick(r);1==t.paddleId||(s=-s),n=pe.height*e.y+pe.offsetTop;e={id:o,x:i,y:n,speed:s,type:l,paddleId:s>0?1:2};Pe[o]=e}(e,t)}(w=e[b.i],t),0==b.id.indexOf("left")||0==b.id.indexOf("right")?t.vx=-t.vx:t.vy=-t.vy}}(t,e)}function m(e,t){var a,i,n,o=++le;e?(a=Math.round(pe.width*e.x+pe.width/2-oe),i=Math.round(pe.height*e.y+pe.height/2-oe),n=re):(a=0,i=0,n=re);var s={id:o,x:a,y:i,speed:n,sticky:t,stickyX:0,paddleId:t};return Ce[t].balls++,Ge[o]=s,Z||C||ue.balls+ge.balls<10||(C=!0,PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.juggler)),s}function b(e,t){for(var a=0;e>a;a++){var i=m(!0,t.id),o=2*Math.random()-1;i.stickyX=o}r(),n(t)}function w(e){delete Pe[e.id],D.loseBrick(e)}function y(e,t){delete Pe[e.id],function(e,t){switch(e.nextPowerup=Utils.between(we.min,we.max),e.powerupsUsed++,Sound.doAction("powerup"),t){case 1:b(1,e);break;case 2:b(2,e);break;case 3:!function(e){e.powerupWideRemoveTime||(e.originalWidth||(e.originalWidth=e.width),e.width=e.originalWidth*ve,e.half=Math.round(e.width/2)),e.powerupWideRemoveTime=new Date((new Date).getTime()+ye)}(e);break;case 4:!function(e){e.powerupSlowDownRemoveTime=new Date((new Date).getTime()+ke)}(x(e));break;case 5:!function(e){e.invisible=!0,e.powerupInvisibleRemoveTime=new Date((new Date).getTime()+Me)}(x(e));break;case 6:!function(e){e.powerupSmallRemoveTime||(e.originalWidth||(e.originalWidth=e.width),e.width=e.originalWidth*Se,e.half=Math.round(e.width/2)),e.powerupSmallRemoveTime=new Date((new Date).getTime()+Te)}(x(e))}}(t,e.type),D.loseBrick(e)}function v(e){for(var t in Ce){var i=Ce[t];if((!e||e&&e.id==t)&&i.ai&&i.sticky&&(i.ballsLost>0||Z)){var n=Utils.between(1e3,2e3);window.Film&&Film.enabled&&!window.Film.firstBallTimed&&(window.Film.firstBallTimed=!0,n=690),setTimeout(a,n,i)}}}function T(e){var t=2==e.id,a={y:t?999:-999},i={y:t?999:-999};for(var n in Ge){var s=Ge[n];(1==Q||s.paddleId==e.id)&&(s.sticky||(t&&s.y<a.y||!t&&s.y>a.y)&&(a=s))}for(var n in Pe){var r=Pe[n];(1==Q||r.paddleId==e.id)&&(t&&r.y<i.y||!t&&r.y>i.y)&&(i=r)}if(void 0===e.dx){var l=te.width/4;e.dx=Utils.between(l,te.width-l,4)}if(!e.nextHitOffset){var d=de.half/2;e.nextHitOffset=Utils.between(-d,d)}var c=a,h=oe;i.id&&(t?a.y-i.y>pe.catchThresholdForAi&&(c=i,h=pe.fallTemplate.halfWidth):i.y-a.y>pe.catchThresholdForAi&&(c=i,h=pe.fallTemplate.halfWidth)),c.x&&(e.dx=c.x+h+e.nextHitOffset),e.dx>e.x?(e.speed=Math.min(de.maxSpeed,++e.speed),e.x+e.speed>e.dx&&(e.speed=e.dx-e.x)):e.dx<e.x&&(e.speed=Math.max(-de.maxSpeed,--e.speed),e.x+e.speed<e.dx&&(e.speed=e.dx-e.x)),e.x+=e.speed,o(e)}function S(e){e.width=e.originalWidth,e.half=Math.round(e.width/2),e.powerupWideRemoveTime=void 0}function A(e){e.width=e.originalWidth,e.half=Math.round(e.width/2),e.powerupSmallRemoveTime=void 0}function k(){h()}function E(e){k();var t={win:1==e.id,ai:J,demo:Z,stage:X,ms:milliSecondsPassed,moved:W,player2Moved:B,player1PowerupsUsed:ge.powerupsUsed,player1BallsLost:ge.ballsLost};if(Storage.levelCompleted(t),Z)Game.showTheEnd();else{var a="<h1>"+lang("youWin")+"</h1>";loseMessage="<h1>"+lang("youLose")+"</h1>";var i={action:"theend",autoAdvance:{duration:5e3},text:1==e.id?a:loseMessage},n=void 0;if(Game.pongEnabled||(i.action="enablePong"),J){if(1==e.id){var o=milliSecondsPassed;if(!isNaN(o)&&o>=1){var s=parseInt(o%1e3),r=parseInt(o/1e3%60),l=parseInt(o/6e4%60),d=parseInt(o/36e5%24),c=Utils.padLeft(r,l||d?2:1)+'<span class="ms">.'+Utils.padLeft(s,3)+"</span>";(l||d)&&(c=d?d+":"+Utils.padLeft(l,2)+":"+c:l+":"+c),i.text+="<h4>"+lang("yourTime")+": "+c+"</h4>"}}}else n={inverted:!0,text:2==e.id?a:loseMessage};Game.showMessages(i,n)}}function M(){J&&!Z&&Storage.data&&Storage.data.achievementsUnlocked&&!Storage.data.achievementsUnlocked.clashOfBalls&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.clashOfBalls)}function x(e){return 1==e.id?ue:ge}function P(){var e=ge.ballsLost+"<br>"+ue.ballsLost;$("#score").html(e)}var D=new DOMRenderer,C=!1,G=(Math.PI,!1),O=0,N=10,L=Utils.isTouch(),I=!0,R=null,F=0,U=!1,W=!1,B=!1,z=[1,1,2,2,2,3,3,4,4,5,6,6],H=[1,1,1,2,3,3,3,4,5,6],V=[1,2,3,4,6],_=[1,2,3,4,6],K=z.slice(0),j=H.slice(0),Y=!1,q=0,J=1,Z=!1,X=5,Q=0,ee=!0,te={left:0,top:0,width:0,height:0,halfHeight:0},ae={},ie=.04375,ne=22,oe=11,se=4/480,re=0,le=1,de={t:{w:.21875,h:24/104},width:0,height:0,half:0,maxSpeedFactor:.0125,maxSpeed:0},ce=7/320,he=0,ue=null,ge=null,pe={t:{w:.15625,h:.5},fallTemplate:{w:.09375,h:.6},offsetTop:0,width:64,height:32,halfWidth:0,halfHeight:0,catchThresholdForAiFactor:.2,catchThresholdForAi:0},fe={min:.5,max:1.5,factor:1/480},me=1,be=!0,we={min:2,max:5},ye=7e3,ve=1.75,Te=4e3,Se=.5,Ae=1e3,ke=4e3,Ee=.2,Me=2500,xe=!0,Pe={},De={x:[],y:[]},Ce={},Ge={},Oe=(ae={rows:0,cols:0,bricks:{}},null),Ne={top_left:[0,1,0,0,"top"],top_right:[1,-1,0,0,"top"],bottom_left:[0,1,1,0,"bottom"],bottom_right:[1,-1,1,0,"bottom"],left_top:[0,0,0,1,"left"],left_bottom:[0,0,1,-1,"left"],right_top:[1,0,0,1,"right"],right_bottom:[1,0,1,-1,"right"]};this.start=function(a){$(".message").removeClass("lose show"),I=!0,W=!1,B=!1,J=!(!a.ai&&!a.demo),Z=!!a.demo,!1,milliSecondsPassed=0,Y=!1,K=z.slice(0),j=H.slice(0),1==(Q=a.pong?1:0)?($("#score").show(),K=V.slice(0),j=_.slice(0),$("html").addClass("pong")):($("html").removeClass("pong"),$("#score").hide(),Z&&(j=[1,1,1,1,2,2,2,2,2,2,3,3,3,6,6,4,5])),we={min:2,max:3},window.Film&&Film.enabled&&(we={min:1,max:2},se=4/480,!0,N=9,j=(K=[1,1,1,1,2,2,2,2,2,2,3,3,3,6,6,4,5]).slice(0));var n=a.size||5;X=n,Ge={},Pe={},De={x:[],y:[]},(Ce={})[1]={id:1,x:0,y:0,pos:"bottom",sticky:!0,redBricksCount:0,bricksHit:0,balls:0,ballsLost:0,ballsCaught:0,lastRedBrickDateTime:0,ai:Z,powerupsUsed:0},ge=Ce[1],I&&(Ce[2]={id:2,x:0,y:0,pos:"top",sticky:!0,redBricksCount:0,bricksHit:0,balls:0,ballsLost:0,ballsCaught:0,lastRedBrickDateTime:0,ai:J,powerupsUsed:0},ue=Ce[2],J&&(ue.nextHitOffset=0,ue.ai=!0,ue.speed=0),Z&&(ge.nextHitOffset=0,ge.ai=!0,ge.speed=0)),I=!0,e(),D.start(Pe,Ce,Ge,Game.authenticFPS?35:0,Q),$("#gameplay").show(),t(),function(){for(var e in Ce){var t=Ce[e];t.x=Math.round(te.width/2),"bottom"==t.pos&&(t.y=Math.round(te.height-5*de.height)),"top"==t.pos&&(t.y=Math.round(4*de.height)),o(t)}}(),function(e){e=e||5,D.prepareLevel(e),pe.width=Math.ceil(te.width/e),pe.height=Math.ceil(pe.width*pe.t.h),pe.halfWidth=Math.ceil(pe.width/2),pe.halfHeight=Math.ceil(pe.height/2);var t=Math.ceil(te.height/pe.height/2),a=2*t,i=[],n=a*e;ae.cols=e,ae.rows=a;for(var o=0;n>o;o++)i[o]=t*e>o?1:2;pe.offsetTop=I?te.halfHeight-a*pe.halfHeight:0;for(o=0;o<i.length;o++){var s=o%e,r=Math.floor(o/e);color=i[o],isTwice=color>10,isTwice&&(color-=10);var l=s*pe.width,d=r*pe.height+pe.offsetTop;0==s&&De.y.push(d),0==r&&De.x.push(l),ae.bricks[s+","+r]={px:l,py:d,color:color},color>0&&D.drawBackgroundBrick(color,l,d)}}(n),c();var s=1;for(var r in 1==Q&&(Z||!J)&&(s=Utils.between(1,2)),Ce)i(Ce[r],de.width),Ce[r].nextPowerup=Utils.between(we.min,we.max),0==Q||r==s?m(!1,r):Ce[r].sticky=!1;P(),J?v():$("html").addClass("pvp"),Z&&$("html").addClass("demo")},this.pause=k,this.resume=function(){c()},this.resize=t,this.detectColission=f,this.addBall=m,this.win=E,this.__defineGetter__("balls",(function(){return Ge})),this.__defineGetter__("paddles",(function(){return Ce})),this.__defineGetter__("scanlines",(function(){return De})),this.__defineGetter__("frozen",(function(){return ee}))},Storage=new function(){function e(){a(n,JSON.stringify(s))}function t(e,t){if($.browser.chromeWebStore)chrome.storage.local.get(e,t);else{var a={};a[e]=localStorage.getItem(e),t(a)}}function a(e,t,a){if($.browser.chromeWebStore){var i={};i[e]=t,chrome.storage.local.set(i,a)}else localStorage.setItem(e,t),a&&a()}var i=6e4,n="game_storage",o={q:42,music:!0,filmEffects:!0,authenticFPS:!0,fullVersion:!1,gamesPlayed:0,gamesWon:0,gamesLost:0,twoPlayerGamesPlayed:0,gamesSpectated:0,size3won:0,size4won:0,size5won:0,size6won:0,size7won:0,bestTimeSize3:3*i,bestTimeSize4:4*i,bestTimeSize5:5*i,bestTimeSize6:6*i,bestTimeSize7:7*i,autoSignIn:!0,achievementsUnlocked:{},achievementsNotSent:{}},s=JSON.parse(JSON.stringify(o));this.init=function(e){t(n,(function(t){if(t&&t[n]){var a=t[n],i=JSON.parse(a);if(i&&42==i.q)for(var r in s=i,!0,o)null==s[r]&&(s[r]=o[r])}e&&e()}))},this.getItem=t,this.setItem=a,this.clear=function(e){$.browser.chromeWebStore?chrome.storage.local.clear(e):(localStorage.clear(),e&&e())},this.levelCompleted=function(t){if(Game.debug&&console.log("game completed",t),t.ms&&!isNaN(t.ms)){var a=t.ai&&!t.demo,i=!t.ai&&!t.demo,n=t.ai&&t.demo;if(a)if(s.gamesPlayed++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.gamesPlayed,s.gamesPlayed),t.win){s.gamesWon++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.gamesWon,s.gamesWon),3==t.stage&&s.size3won++,4==t.stage&&s.size4won++,5==t.stage&&s.size5won++,6==t.stage&&s.size6won++,7==t.stage&&s.size7won++;var o=PlayCenter.IDS.Leaderboards["stage"+(t.stage-2)+"Won"],r=s["size"+t.stage+"won"];if(o&&r&&PlayCenter.submitScore(o,r),t.ms>=1){PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.bestTime,t.ms);var l=s["bestTimeSize"+t.stage];if(!isNaN(l)&&t.ms<l){s["bestTimeSize"+t.stage]=t.ms;var d=PlayCenter.IDS.Leaderboards["bestTimeStage"+(t.stage-2)];d&&PlayCenter.submitScore(d,t.ms)}}0==t.player1PowerupsUsed&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.chuckNorris),0==t.player1BallsLost&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.zeroCasualties),t.moved||PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.lookMaNoHands)}else s.gamesLost++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.gamesLost,s.gamesLost);i&&(s.gamesPlayed++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.gamesPlayed,s.gamesPlayed),s.twoPlayerGamesPlayed++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.twoPlayerGamesPlayed,s.twoPlayerGamesPlayed),s.twoPlayerGamesPlayed>=10&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.socialPlayer),(t.win&&!t.player2Moved||!t.win&&!t.moved)&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.dummyPractice)),n&&(s.gamesSpectated++,PlayCenter.submitScore(PlayCenter.IDS.Leaderboards.gamesWatched,s.gamesSpectated),s.gamesSpectated>=10&&PlayCenter.unlockAchievement(PlayCenter.IDS.Achievements.twitchAddict)),Game.debug&&console.log(s),e()}},this.setDataValue=function(t,a){s[t]=a,e()},this.getDataValue=function(e,t){return void 0===s[e]?null!=t&&t:s[e]},this.achievementUnlocked=function(t){s.achievementsUnlocked[t]||(Game.debug&&console.log("achievement unlocked: "+t),s.achievementsUnlocked[t]=!0,s.achievementsNotSent[t]=!0,e())},this.achievementSent=function(t){s.achievementsUnlocked[t]&&s.achievementsNotSent[t]&&(delete s.achievementsNotSent[t],e())},this.__defineGetter__("data",(function(){return s}))},Sound=new function(){function e(e){if(t){var a=i[e];if(a)if(a.current=++a.current%a.channels,a.loop){var n=a.channel[a.current];n.seekTo&&n.seekTo(0),n.play({numberOfLoops:999,playAudioWhenScreenIsLocked:!1})}else a.channel[a.current].play({playAudioWhenScreenIsLocked:!1})}}var t=!1,a=!1,i={pr_bluegooserag_vinyl:{channels:1,current:0,channel:[],loop:!0}};this.init=function(n){for(var o in t=n,i)for(var s=i[o],r=0;r<s.channels;r++)if(window.isWebApp){(d=new Audio("sound/"+o+".mp3")).preload=!0,d.load(),s.loop&&(d.loop=!0),s.channel.push(d)}else{var l=window.location.pathname.replace(/index\.html/gi,""),d=new Media(l+"sound/"+o+".mp3",(function(){}),(function(){}),(function(t){!a&&s.loop&&t==Media.MEDIA_STOPPED&&setTimeout((function(){e(o)}),700)}));s.channel.push(d)}},this.play=e,this.pauseAll=function(){if(t){a=!0;var e=i.pr_bluegooserag_vinyl,n=e.channel[e.current];n&&n.pause()}},this.resumeAll=function(){if(t){a=!1;var e=i.pr_bluegooserag_vinyl,n=e.channel[e.current];n&&n.play()}},this.doAction=function(t){switch(t){case"piano":e("pr_bluegooserag_vinyl")}},this.enable=function(){t=!0},this.disable=function(){t=!1}},PlayCenter=new function(){this.IDS={Leaderboards:{},Achievements:{}},this.autoSignIn=function(e){},this.signIn=function(e,t){},this.signOut=function(e){},this.submitScore=function(e,t){},this.showLeaderboard=function(e){},this.unlockAchievement=function(e){},this.showAchievements=function(){},this.resetAchievements=function(){},this.__defineGetter__("enabled",(function(){return false})),this.__defineGetter__("isSignedIn",(function(){return false}))},Framer=new function(){function e(){new Date,requestAnimFrame(e);for(var a=0;a<t.length;a++)t[a]()}var t=[];$((function(){requestAnimFrame(e)})),this.addHandler=function(e){t.push(e)}},Store=new function(){function e(){s.isActive&&(s.isTrial||Game.buyIAPApproved())}function t(){(i=!0)&&(store.when(o).owned((function(e){n&&alert("FULL VERSION OWNED, UNLOCKING"),Game.unlockFullVersion()})),store.when(o).approved((function(e){n&&alert("FULL VERSION APPROVED, UNLOCKING"),e.finish(),Game.buyIAPApproved()})),store.when(o).cancelled((function(e){n&&alert("FULL VERSION CANCELLED")})),store.when(o).error((function(e){n&&alert("FULL VERSION ERROR"),Game.errorIAP()})),window.MSApp&&e()),Game.fullVersion||a(),n&&alert("\\o/ STORE READY \\o/")}function a(t){if(i&&!Game.fullVersion){if(n&&alert("RESTORE PURCHASE?"),window.store){var a=store.get(o);if(a&&a.transaction&&a.transaction.id)n&&alert("RESTORING PURCHASE BY TRANSACTION"),t?Game.buyIAPApproved():Game.unlockFullVersion();else if(t){var s={action:"back",text:"<h1>"+lang("couldNotRestorePurchase")+"</h1>"};Game.showMessages(s)}n&&alert(JSON.stringify(a))}window.MSApp&&e()}}var i=!1,n=!1,o="contranoid_full_version",s=null;this.init=function(){window.store&&(store.verbosity=store.DEBUG,store.register({id:o,alias:o,type:store.NON_CONSUMABLE}),store.ready(t),store.refresh(),n&&store.error((function(e){alert("STORE ERROR "+e.code+": "+e.message)}))),window.MSApp&&(currentApp=Windows.ApplicationModel.Store.CurrentApp,s=currentApp.licenseInformation,i=!0,s.addEventListener("licensechanged",e))},this.buyFullVersion=function(){if(i&&(window.MSApp||store.order(o),window.MSApp)){var e=currentApp.licenseInformation;!e.isActive||e.isTrial?currentApp.requestAppPurchaseAsync(!1).done((function(){e.isActive&&!e.isTrial?(WinJS.log&&WinJS.log("You successfully upgraded your app to the fully-licensed version.","sample","status"),Game.buyIAPApproved()):WinJS.log&&WinJS.log("You still have a trial license for this app.","sample","error")}),(function(){WinJS.log&&WinJS.log("The upgrade transaction failed. You still have a trial license for this app.","sample","error")})):(WinJS.log&&WinJS.log("You already bought this app and have a fully-licensed version.","sample","error"),Game.buyIAPApproved())}},this.restorePurchases=a,this.__defineGetter__("enabled",(function(){return i}))};!function(e,t,a,i,n,o,s){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src="js/analytics.js",s.parentNode.insertBefore(o,s)}(window,document,"script",0,"ga");var Analytics={init:function(){var e=Storage.getDataValue("uuid",null);e||(e=generateUUID(),Storage.setDataValue("uuid",e));ga("create","UA-66183159-2",{storage:"none",clientId:e}),ga("set","checkProtocolTask",null),ga("set","checkStorageTask",null),ga("send","pageview",{page:"/"})}};$(app.onDeviceReady);